<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banco de Dados - Curso de Scratch</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="main-layout">
        <header class="header">
            <div class="logo">
                <img src=img/scratch.png height=100px width=100px alt="Scratch Logo" id="scratch-logo">
            </div>
            <nav>
                <ul class="nav-menu">
                    <li id="adminLink"><a href="admin.html">Administração</a></li>
                    <li><a href="database.html" class="active">Banco de Dados</a></li>
                    <li><a href="teacher-diary.html">Diário de Classe</a></li>
                    <li><a href="teacher-materials.html">Materiais</a></li>
                    <li class="dropdown">
                        <a href="#">Links Externos ▼</a>
                        <div class="dropdown-content">
                            <a href="https://scratch.mit.edu/" target="_blank">Scratch Website</a>
                            <a href="https://scratch.mit.edu/projects/editor/" target="_blank">Editor do Scratch</a>
                            <a href="https://scratch.mit.edu/ideas" target="_blank">Ideias de Projetos</a>
                            <a href="https://www.youtube.com/results?search_query=scratch+tutorial+português" target="_blank">Tutoriais YouTube</a>
                            <a href="https://wayground.com/home-v1?lng=pt-BR" target="_blank">Wayground (Quizizz)</a>
                        </div>
                    </li>
                    <li class="dropdown">
                        <a href="#">Informações ▼</a>
                        <div class="dropdown-content">
                            <a href="horario-onibus.html">Horário do Ônibus</a>
                            <a href="calendario-aulas.html">Calendário das Aulas</a>
                            <a href="#" onclick="abrirWhatsApp()">Link do grupo do WhatsApp</a>
                            <a href="endereco-aula.html">Endereço do Local das Aulas</a>
                            <a href="contato.html">Contato</a>
                        </div>
                    </li>
                </ul>
            </nav>
            <div class="user-profile">
                <div class="user-avatar"><img src=img/icon-user.png height= 40px width= 40px alt="Icone do Perfil"></div>
            </div>
        </header>
        
        <main class="content">
            <h1 class="page-title">Banco de Dados</h1>
            
            <div class="database-controls">
                <div class="table-selector">
                    <label for="tableSelect"><strong>Tabela:</strong></label>
                    <select id="tableSelect" onchange="changeTable()">
                        <option value="info_alunos">info_alunos</option>
                        <option value="status_alunos">status_alunos</option>
                        <option value="login_alunos">login_alunos</option>
                        <option value="atividades_alunos">atividades_alunos</option>
                    </select>
                </div>
                
                <div class="search-box">
                    <label for="searchInput"><strong>Pesquisar:</strong></label>
                    <input type="text" id="searchInput" placeholder="Digite para pesquisar..." onkeyup="searchTable()">
                </div>
            </div>
            
            <div id="table_info_alunos" class="database-table-container">
                <table class="database-table">
                    <thead>
                        <tr>
                            <th>turma</th>
                            <th>nome</th>
                            <th>email</th>
                            <th>telefone</th>
                            <th>nascimento</th>
                            <th>rg</th>
                            <th>cpf</th>
                            <th>endereco</th>
                            <th>escolaridade</th>
                            <th>escola</th>
                            <th>responsavel</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody>
                        </tbody>
                </table>
            </div>
            
            <div id="table_status_alunos" class="database-table-container hidden">
                <table class="database-table">
                    <thead>
                        <tr>
                            <th>nome</th>
                            <th>status</th>
                            <th>frequencia</th>
                            <th>atividades_enviadas</th>
                            <th>ultima_atividade</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Fulano de Tal</td>
                            <td>Ativo</td>
                            <td>80%</td>
                            <td>3/5</td>
                            <td>Aula 3</td>
                        </tr>
                        <tr>
                            <td>João Todynho</td>
                            <td>Ativo</td>
                            <td>90%</td>
                            <td>4/5</td>
                            <td>Aula 4</td>
                        </tr>
                        <tr>
                            <td>Ciclano da Silva Sauro</td>
                            <td>Ativo</td>
                            <td>100%</td>
                            <td>5/5</td>
                            <td>Aula 5</td>
                        </tr>
                        <tr>
                            <td>Beltrano Pereira</td>
                            <td>Ativo</td>
                            <td>70%</td>
                            <td>2/5</td>
                            <td>Aula 2</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div id="table_login_alunos" class="database-table-container hidden">
                <table class="database-table">
                    <thead>
                        <tr>
                            <th>usuario</th>
                            <th>nome</th>
                            <th>ultimo_login</th>
                            <th>total_logins</th>
                            <th>status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>programacao</td>
                            <td>Fulano de Tal</td>
                            <td>27/06/2025 19:30</td>
                            <td>15</td>
                            <td>Online</td>
                        </tr>
                        <tr>
                            <td>aluno1</td>
                            <td>Maria Santos</td>
                            <td>26/06/2025 14:20</td>
                            <td>12</td>
                            <td>Offline</td>
                        </tr>
                        <tr>
                            <td>aluno2</td>
                            <td>João Oliveira</td>
                            <td>25/06/2025 16:45</td>
                            <td>8</td>
                            <td>Offline</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div id="table_atividades_alunos" class="database-table-container hidden">
                <table class="database-table">
                    <thead>
                        <tr>
                            <th>nome</th>
                            <th>aula_1</th>
                            <th>aula_2</th>
                            <th>aula_3</th>
                            <th>aula_4</th>
                            <th>aula_5</th>
                            <th>total_enviadas</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Fulano de Tal</td>
                            <td>✅ Enviada</td>
                            <td>✅ Enviada</td>
                            <td>✅ Enviada</td>
                            <td>❌ Pendente</td>
                            <td>❌ Pendente</td>
                            <td>3/5</td>
                        </tr>
                        <tr>
                            <td>João Todynho</td>
                            <td>✅ Enviada</td>
                            <td>✅ Enviada</td>
                            <td>✅ Enviada</td>
                            <td>✅ Enviada</td>
                            <td>❌ Pendente</td>
                            <td>4/5</td>
                        </tr>
                        <tr>
                            <td>Ciclano da Silva Sauro</td>
                            <td>✅ Enviada</td>
                            <td>✅ Enviada</td>
                            <td>✅ Enviada</td>
                            <td>✅ Enviada</td>
                            <td>✅ Enviada</td>
                            <td>5/5</td>
                        </tr>
                        <tr>
                            <td>Beltrano Pereira</td>
                            <td>✅ Enviada</td>
                            <td>✅ Enviada</td>
                            <td>❌ Pendente</td>
                            <td>❌ Pendente</td>
                            <td>❌ Pendente</td>
                            <td>2/5</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="database-actions">
                <button class="action-btn primary" onclick="addRecord()">ADICIONAR</button>
                <button class="action-btn secondary" onclick="editRecord()">EDITAR</button>
            </div>
        </main>
    </div>

    <div id="addAlunoModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>➕ Adicionar Novo Aluno</h3>
                <button class="close-btn" onclick="closeAddAlunoModal()">×</button>
            </div>
            <div class="modal-body">
                <form id="addAlunoForm">
                    <div class="form-group">
                        <label for="turma">Turma:</label>
                        <input type="text" id="turma" name="turma" required>
                    </div>
                    <div class="form-group">
                        <label for="nome">Nome:</label>
                        <input type="text" id="nome" name="nome" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Email:</label>
                        <input type="email" id="email" name="email">
                    </div>
                    <div class="form-group">
                        <label for="telefone">Telefone:</label>
                        <input type="text" id="telefone" name="telefone">
                    </div>
                    <div class="form-group">
                        <label for="data_nascimento">Data de Nascimento:</label>
                        <input type="date" id="data_nascimento" name="data_nascimento">
                    </div>
                    <div class="form-group">
                        <label for="rg">RG:</label>
                        <input type="text" id="rg" name="rg">
                    </div>
                    <div class="form-group">
                        <label for="cpf">CPF:</label>
                        <input type="text" id="cpf" name="cpf">
                    </div>
                    <div class="form-group">
                        <label for="endereco">Endereço:</label>
                        <input type="text" id="endereco" name="endereco">
                    </div>
                    <div class="form-group">
                        <label for="escolaridade">Escolaridade:</label>
                        <input type="text" id="escolaridade" name="escolaridade">
                    </div>
                    <div class="form-group">
                        <label for="escola">Escola:</label>
                        <input type="text" id="escola" name="escola">
                    </div>
                    <div class="form-group">
                        <label for="responsavel">Responsável:</label>
                        <input type="text" id="responsavel" name="responsavel">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="action-btn secondary" onclick="closeAddAlunoModal()">Cancelar</button>
                        <button type="submit" class="action-btn primary">Adicionar Aluno</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="editAlunoModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>✏️ Editar Aluno</h3>
                <button class="close-btn" onclick="closeEditAlunoModal()">×</button>
            </div>
            <div class="modal-body">
                <form id="editAlunoForm">
                    <input type="hidden" id="editAlunoId" name="id">

                    <div class="form-group">
                        <label for="editTurma">Turma:</label>
                        <input type="text" id="editTurma" name="turma" required>
                    </div>
                    <div class="form-group">
                        <label for="editNome">Nome:</label>
                        <input type="text" id="editNome" name="nome" required>
                    </div>
                    <div class="form-group">
                        <label for="editEmail">Email:</label>
                        <input type="email" id="editEmail" name="email">
                    </div>
                    <div class="form-group">
                        <label for="editTelefone">Telefone:</label>
                        <input type="text" id="editTelefone" name="telefone">
                    </div>
                    <div class="form-group">
                        <label for="editDataNascimento">Data de Nascimento:</label>
                        <input type="date" id="editDataNascimento" name="data_nascimento">
                    </div>
                    <div class="form-group">
                        <label for="editRg">RG:</label>
                        <input type="text" id="editRg" name="rg">
                    </div>
                    <div class="form-group">
                        <label for="editCpf">CPF:</label>
                        <input type="text" id="editCpf" name="cpf">
                    </div>
                    <div class="form-group">
                        <label for="editEndereco">Endereço:</label>
                        <input type="text" id="editEndereco" name="endereco">
                    </div>
                    <div class="form-group">
                        <label for="editEscolaridade">Escolaridade:</label>
                        <input type="text" id="editEscolaridade" name="escolaridade">
                    </div>
                    <div class="form-group">
                        <label for="editEscola">Escola:</label>
                        <input type="text" id="editEscola" name="escola">
                    </div>
                    <div class="form-group">
                        <label for="editResponsavel">Responsável:</label>
                        <input type="text" id="editResponsavel" name="responsavel">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="action-btn secondary" onclick="closeEditAlunoModal()">Cancelar</button>
                        <button type="submit" class="action-btn primary">Salvar Alterações</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        function changeTable() {
            const selectedTable = document.getElementById('tableSelect').value;
            
            // Esconder todas as tabelas
            document.querySelectorAll('.database-table-container').forEach(table => {
                table.classList.add('hidden');
            });
            
            // Mostrar tabela selecionada
            document.getElementById(`table_${selectedTable}`).classList.remove('hidden');
        }
        
        function searchTable() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const activeTable = document.querySelector('.database-table-container:not(.hidden)');
            const rows = activeTable.querySelectorAll('tbody tr');
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                if (text.includes(searchTerm)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }
        
        // Funções para abrir/fechar o modal de adicionar aluno
        function addRecord() {
            const selectedTable = document.getElementById('tableSelect').value;
            if (selectedTable === 'info_alunos') {
                document.getElementById('addAlunoModal').classList.remove('hidden');
            } else {
                alert(`Funcionalidade de adicionar ainda não implementada para a tabela: ${selectedTable}`);
            }
        }
        
        function closeAddAlunoModal() {
            document.getElementById('addAlunoModal').classList.add('hidden');
            document.getElementById('addAlunoForm').reset(); // Limpa o formulário
        }

        // Funções para abrir/fechar o modal de editar aluno (Adicione aqui a lógica no script.js)
        function editRecord() {
            const selectedTable = document.getElementById('tableSelect').value;
            if (selectedTable === 'info_alunos') {
                //alert('Funcionalidade de edição para alunos será implementada aqui.');
                // openEditAlunoModal(aluno_id); // Exemplo de como seria chamado
            } else {
                alert(`Funcionalidade de edição ainda não implementada para a tabela: ${selectedTable}`);
            }
        }

        function closeEditAlunoModal() {
            document.getElementById('editAlunoModal').classList.add('hidden');
            document.getElementById('editAlunoForm').reset(); // Limpa o formulário
        }

        function abrirWhatsApp() {
            const whatsappLink = "https://chat.whatsapp.com/GHZuEpQhb5uGFROPWioy9o?mode=ac_c";
            window.open(whatsappLink, '_blank');
        }

        // Fechar modals ao clicar fora ou pressionar ESC (melhor no script.js geral)
        document.addEventListener('DOMContentLoaded', () => {
            const addAlunoModal = document.getElementById('addAlunoModal');
            addAlunoModal.addEventListener('click', (e) => {
                if (e.target === addAlunoModal) {
                    closeAddAlunoModal();
                }
            });
            const editAlunoModal = document.getElementById('editAlunoModal');
            editAlunoModal.addEventListener('click', (e) => {
                if (e.target === editAlunoModal) {
                    closeEditAlunoModal();
                }
            });
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    if (!addAlunoModal.classList.contains('hidden')) {
                        closeAddAlunoModal();
                    }
                    if (!editAlunoModal.classList.contains('hidden')) {
                        closeEditAlunoModal();
                    }
                }
            });
        });
    </script>
</body>
</html>